<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Admin | Manage Players</title>

<style>
*{box-sizing:border-box;font-family:Poppins,sans-serif}
body{margin:0;background:#f4f6fb}
header{background:linear-gradient(90deg,#1976d2,#512da8);color:#fff;padding:16px;display:flex;align-items:center;justify-content:space-between}
header h1{font-size:20px;font-weight:700}
header a{background:rgba(255,255,255,.25);color:#fff;padding:7px 14px;border-radius:20px;text-decoration:none;font-weight:600}

.container{max-width:1000px;margin:25px auto;padding:0 15px}
.card{background:#fff;border-radius:18px;padding:20px;box-shadow:0 10px 25px rgba(0,0,0,.12)}
.player-photo {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  border: 3px solid #5b3cc4;
  object-fit: cover;       /* KEY FIX */
  object-position: top;    /* keeps face visible */
  background: #f2f2f2;
}

.form-group{margin-bottom:12px}
label{font-weight:600;font-size:14px}
input,select{width:100%;margin-top:6px;padding:8px;border-radius:8px;border:1px solid #ccc}

.preview img{width:90px;height:90px;border-radius:50%;margin-top:10px;object-fit:cover;border:2px solid #512da8}

button{border:none;padding:10px 14px;border-radius:10px;font-weight:700;cursor:pointer}
.save{background:#1976d2;color:#fff}
.clear{background:#9e9e9e;color:#fff}
.delete{background:#e53935;color:#fff}

.list{margin-top:30px}
.row{display:grid;grid-template-columns:80px 1fr 1fr 1fr auto;gap:10px;align-items:center;background:#fafafa;padding:10px;border-radius:12px;margin-bottom:8px}
.row img{width:60px;height:60px;border-radius:50%;object-fit:cover}


.top-header {
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  padding: 16px 20px;
  background: linear-gradient(90deg, #1976d2, #512da8);
  color: #fff;
}
.title {
  text-align: center;
  font-size: 20px;
  font-weight: 700;
}
footer {
  height: 60px;
  background: linear-gradient(90deg,#1976d2,#512da8);
  color: #fff;
  font-size: 13px;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
}


/* Announcement base */
.announcement {
  display: flex;
  align-items: center;
  overflow: hidden;
  padding: 10px 16px;
  font-weight: 600;
  font-size: 14px;
  color: #fff;
}

/* Marquee effect */
.marquee {
  flex: 1;
  overflow: hidden;
  white-space: nowrap;
}

.marquee span {
  display: inline-block;
  padding-left: 100%;
  animation: scroll 18s linear infinite;
}

@keyframes scroll {
  from { transform: translateX(0); }
  to { transform: translateX(-100%); }
}

/* Close button */
.close-announce {
  cursor: pointer;
  margin-left: 12px;
  font-size: 16px;
}

/* Alert types */
.announcement.info {
  background: linear-gradient(90deg, #ff9800, #f57c00);
}

</style>
</head>
<body>

<header class="top-header">
  <a href="player.html">‚Üê Back</a>

  <h1 class="title">Adding Players</h1>
  
</header>

<!-- Announcement Banner -->
<div class="announcement info" id="announcement">
  <div class="marquee">
    <span>
      üì¢ No Updates for the player-admin page ! Site is under maintenance , so don't do any registration etc...
    </span>
  </div>
  <span class="close-announce" onclick="closeAnnouncement()">‚úñ</span>
</div>

<div class="container">

<div class="card">
  <h3>Add / Update Player</h3>

  <div class="form-group">
    <label>Player Photo</label>
    <input type="file" accept="image/*" onchange="preview(this)">
    <div class="preview"><img id="photo"></div>
  </div>

  <div class="form-group">
    <label>Name</label>
    <input type="text" id="name">
  </div>

  <div class="form-group">
    <label>Mobile Number</label>
    <input type="text" id="mobile">
  </div>

  <div class="form-group">
    <label>Role</label>
    <select id="role">
      <option>Batsman</option>
      <option>Bowler</option>
      <option>All-Rounder</option>
      <option>Wicket Keeper</option>
    </select>
  </div>

  <button class="save" onclick="savePlayer()">üíæ Save Player</button>
  <button class="clear" onclick="clearForm()">üßπ Clear</button>
</div>

<div class="list" id="list"></div>

</div>

<footer>
  üèè JP Boy's Cricketer's ¬© 2026 | Designed by K B UMESH
</footer>

<script>

const role = "user"; 
// CHANGE TO "user" FOR NORMAL USERS

if (role !== "admin") {
  alert("Access denied. Admin only.");
  window.location.href = "player.html";
}

let editIndex = -1;

function preview(input){
  const f=input.files[0]; if(!f) return;
  const r=new FileReader();
  r.onload=()=>photo.src=r.result;
  r.readAsDataURL(f);
}

function getPlayers(){
  return JSON.parse(localStorage.getItem('players')||'[]');
}


function savePlayer() {
  const players = JSON.parse(localStorage.getItem("players") || "[]");

  const playerName = document.getElementById("name").value.trim();
  const mobile = document.getElementById("mobile").value.trim();
  const role = document.getElementById("role").value;
  const photo = document.getElementById("photo").src;

  if (!playerName || !mobile) {
    alert("Please enter name and mobile number");
    return;
  }

  const data = {
    name: playerName,
    mobile: mobile,
    role: role,
    photo: photo
  };

  players.push(data);
  localStorage.setItem("players", JSON.stringify(players));

  clearForm();
  loadList();
}



function loadList(){
  const players = getPlayers();
  const box = document.getElementById('list');
  box.innerHTML = '<h3>Saved Players</h3>';

  players.forEach((p,i)=>{
    box.innerHTML += `
      <div class="row">
        <img src="${p.photo || 'https://via.placeholder.com/60'}">
        <div>${p.name}</div>
        <div>${p.mobile}</div>
        <div>${p.role}</div>
        <button class="delete" onclick="removePlayer(${i})">üóë</button>
      </div>`;
  });
}

function removePlayer(i){
  const players = getPlayers();
  players.splice(i,1);
  localStorage.setItem('players', JSON.stringify(players));
  loadList();
}

function clearForm(){
  name.value=''; mobile.value=''; role.value='Batsman'; photo.src='';
}

window.onload = loadList;
</script>

<script>
function closeAnnouncement() {
  document.getElementById("announcement").style.display = "none";
}
</script>
</body>
</html>
